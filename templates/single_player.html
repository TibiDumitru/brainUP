<!DOCTYPE html>
<head>
   <title>Single player mode</title>
   <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='style-single.css') }}">
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
</head>
<body>
      <a id="home-single" href="{{ url_for('home') }}"><i class="fas fa-home"></i> Home</a>
      <div class="bg-contact">
      <div class="container-contact">
         <div class="wrap-contact"  style="float:left">
              <span class="contact-form-title">
					Question number
					 <input class="contact-form-title q-number" type="text" id="q-number" value="1"/>
				</span>
              <div class="quiz-container">
			  	<div id="quiz"></div>
			  </div>
			 <button style="display:none" id="previous">Previous Question</button>
			 <button class="button" onclick="incrementQuestion()" id="next">Next Question</button>
			 <p style="height:28px"></p>
			 <button style="float:right; height: 40px; padding: 0" class="button" id="myBtn">Submit Quiz</button>

			 <div id="myModal" class="modal">

				  <!-- Modal content -->
				  <div class="modal-content">
					<span class="close">&times;</span>
					<p>Your result is <div id="results"></div></p>
				  </div>

				</div>

         </div>

         <div class="wrap-contact" style="float:right">
         </div>
      </div>
   </div>
</body>
</html>

<script>

</script>

<script>
 function incrementQuestion()
	{
		var value = parseInt(document.getElementById("q-number").value, 10);
		value = isNaN(value) ? 1 : value;
		value++;
		document.getElementById("q-number").value = value;
	}

	(function(){
	  // Functions
	  function buildQuiz(){
		// variable to store the HTML output
		const output = [];
		// for each question...
		myQuestions.forEach(
		  (currentQuestion, questionNumber) => {
			// variable to store the list of possible answers
			const answers = [];
			// and for each available answer...
			for(letter in currentQuestion.answers){
			  // ...add an HTML radio button
			  answers.push(
				`<label>
				  <input type="radio" name="question${questionNumber}" value="${letter}">
				  ${letter} :
				  ${currentQuestion.answers[letter]}
				</label>`
			  );
			}
			// add this question and its answers to the output
			output.push(
			  `<div class="slide">
				<div class="question"> ${currentQuestion.question} </div>
				<div class="answers"> ${answers.join("")} </div>
			  </div>`
			);
		  }
		);
		// finally combine our output list into one string of HTML and put it on the page
		quizContainer.innerHTML = output.join('');
	  }
	  function showResults(){
		// gather answer containers from our quiz
		const answerContainers = quizContainer.querySelectorAll('.answers');
		// keep track of user's answers
		let numCorrect = 0;
		// for each question...
		myQuestions.forEach( (currentQuestion, questionNumber) => {
		  // find selected answer
		  const answerContainer = answerContainers[questionNumber];
		  const selector = `input[name=question${questionNumber}]:checked`;
		  const userAnswer = (answerContainer.querySelector(selector)).value;
		  // if answer is correct
		  if(userAnswer === currentQuestion.correctAnswer){
			// add to the number of correct answers
			numCorrect++;
			// color the answers green
		  }
		});
		// show number of correct answers out of total
		resultsContainer.innerHTML = `${numCorrect} out of ${myQuestions.length}`;
	  }

	  function showSlide(n) {
		slides[currentSlide].classList.remove('active-slide');
		slides[n].classList.add('active-slide');
		currentSlide = n;

		if(currentSlide === slides.length-1){
		  nextButton.style.display = 'none';
		  submitButton.style.display = 'inline-block';
		}
		else{
		  nextButton.style.display = 'inline-block';
		  submitButton.style.display = 'none';
		}
	  }
	  function showNextSlide() {
		showSlide(currentSlide + 1);
	  }

	  // Variables
	  const quizContainer = document.getElementById('quiz');
	  const resultsContainer = document.getElementById('results');
	  const submitButton = document.getElementById('myBtn');
	  const myQuestions = [
		{
		  question: "Who invented JavaScript?",
		  answers: {
			a: "Douglas Crockford",
			b: "Sheryl Sandberg",
			c: "Brendan Eich"
		  },
		  correctAnswer: "c"
		},
		{
		  question: "Which one of these is a JavaScript package manager?",
		  answers: {
			a: "Node.js",
			b: "TypeScript",
			c: "npm"
		  },
		  correctAnswer: "c"
		},
		{
		  question: "Which tool can you use to ensure code quality?",
		  answers: {
			a: "Angular",
			b: "jQuery",
			c: "RequireJS",
			d: "ESLint"
		  },
		  correctAnswer: "d"
		}
	  ];
	  // Kick things off
	  buildQuiz();
	  // Pagination
	  const nextButton = document.getElementById("next");
	  const slides = document.querySelectorAll(".slide");
	  let currentSlide = 0;
	  // Show the first slide
	  showSlide(currentSlide);
	  // Event listeners
	  submitButton.addEventListener('click', showResults);
	  nextButton.addEventListener("click", showNextSlide);
	})();
</script>

<script>
	// SCRIPT FOR MODAL
	// Get the modal
	var modal = document.getElementById("myModal");

	// Get the button that opens the modal
	var btn = document.getElementById("myBtn");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks the button, open the modal
	btn.onclick = function() {
	  modal.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
	  modal.style.display = "none";
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
	  if (event.target == modal) {
		modal.style.display = "none";
	  }
	}
</script>